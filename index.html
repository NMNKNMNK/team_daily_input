<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊØéÊó•„ÅÆÊåØ„ÇäËøî„Çä„Ç∑„Éº„Éà ‚ú®</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #ffeef8 0%, #f0f9ff 50%, #f0fdf4 100%);
            min-height: 100vh;
        }
        .cute-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 2px solid #fce7f3;
            box-shadow: 0 8px 32px rgba(236, 72, 153, 0.1);
        }
        .mood-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }
        .mood-button:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }
        .mood-button.selected {
            border-color: #ec4899;
            box-shadow: 0 0 0 4px rgba(236, 72, 153, 0.2);
        }
        .stress-level {
            height: 20px;
            background: linear-gradient(90deg, #10b981 0%, #fbbf24 50%, #ef4444 100%);
            border-radius: 10px;
            position: relative;
            cursor: pointer;
        }
        .stress-indicator {
            width: 24px;
            height: 24px;
            background: white;
            border: 3px solid #ec4899;
            border-radius: 50%;
            position: absolute;
            top: -2px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .input-field {
            border: 2px solid #f3e8ff;
            border-radius: 12px;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
        }
        .input-field:focus {
            outline: none;
            border-color: #a855f7;
            box-shadow: 0 0 0 4px rgba(168, 85, 247, 0.1);
            background: rgba(255, 255, 255, 1);
        }
        .section-header {
            background: linear-gradient(135deg, #fce7f3 0%, #e0e7ff 100%);
            padding: 16px 20px;
            border-radius: 12px;
            margin-bottom: 16px;
            border: 2px solid #ddd6fe;
        }
        .floating-hearts {
            position: fixed;
            top: 20px;
            right: 20px;
            font-size: 20px;
            color: #ec4899;
            opacity: 0.6;
            animation: float 3s ease-in-out infinite;
            z-index: 40;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .achievement-badge {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 4px;
        }
        .gratitude-heart {
            color: #ef4444;
            font-size: 18px;
            margin-right: 8px;
        }
        
        /* „Éè„É≥„Éê„Éº„Ç¨„Éº„É°„Éã„É•„Éº„ÅÆ„Çπ„Çø„Ç§„É´ */
        .hamburger-menu {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 50;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 2px solid #fce7f3;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(236, 72, 153, 0.2);
        }
        
        .hamburger-menu:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 30px rgba(236, 72, 153, 0.3);
        }
        
        .side-menu {
            position: fixed;
            top: 0;
            left: -400px;
            width: 350px;
            height: 100vh;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            z-index: 45;
            transition: left 0.3s ease;
            border-right: 2px solid #fce7f3;
            box-shadow: 4px 0 20px rgba(236, 72, 153, 0.1);
            overflow-y: auto;
        }
        
        .side-menu.open {
            left: 0;
        }
        
        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: 40;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .menu-item {
            padding: 16px 24px;
            border-bottom: 1px solid #f3e8ff;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .menu-item:hover {
            background: linear-gradient(135deg, #fce7f3 0%, #e0e7ff 100%);
        }
        
        .record-card {
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid #fce7f3;
            border-radius: 16px;
            padding: 16px;
            margin: 8px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .record-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(236, 72, 153, 0.15);
        }
        
        .save-notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            z-index: 60;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            font-weight: 600;
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
        }
        
        .save-notification.show {
            transform: translateX(0);
        }
        
        .page-title {
            background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 50%, #06b6d4 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .mood-emoji {
            font-size: 24px;
            margin-right: 8px;
        }
        
        .stats-card {
            background: linear-gradient(135deg, #fce7f3 0%, #e0e7ff 100%);
            border: 2px solid #ddd6fe;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
        }
    </style>
</head>
<body class="p-4">
    <!-- „Éè„É≥„Éê„Éº„Ç¨„Éº„É°„Éã„É•„Éº„Éú„Çø„É≥ -->
    <div class="hamburger-menu" onclick="toggleMenu()">
        <i class="fas fa-bars text-pink-500 text-xl"></i>
    </div>
    
    <!-- „Çµ„Ç§„Éâ„É°„Éã„É•„Éº -->
    <div class="side-menu" id="sideMenu">
        <div class="p-6 border-b-2 border-pink-200">
            <h2 class="text-2xl font-bold page-title flex items-center gap-2">
                <i class="fas fa-heart"></i>
                „Éû„Ç§Êó•Ë®ò
            </h2>
            <p class="text-gray-600 mt-2">ÊØéÊó•„ÅÆË®òÈå≤„ÇíÁÆ°ÁêÜ üíï</p>
        </div>
        
        <div class="menu-item" onclick="showCurrentEntry()">
            <i class="fas fa-edit text-purple-500"></i>
            <span>‰ªäÊó•„ÅÆË®òÈå≤„ÇíÊõ∏„Åè</span>
        </div>
        
        <div class="menu-item" onclick="showAllRecords()">
            <i class="fas fa-list text-blue-500"></i>
            <span>ÈÅéÂéª„ÅÆË®òÈå≤„ÇíË¶ã„Çã</span>
        </div>
        
        <div class="menu-item" onclick="showStats()">
            <i class="fas fa-chart-bar text-green-500"></i>
            <span>Áµ±Ë®à„ÉªÂàÜÊûê</span>
        </div>
        
        <div class="menu-item" onclick="exportData()">
            <i class="fas fa-download text-orange-500"></i>
            <span>„Éá„Éº„Çø„ÇíÂá∫Âäõ</span>
        </div>
        
        <div class="p-6 border-t-2 border-pink-200 mt-auto">
            <div class="text-sm text-gray-600">
                <div class="flex justify-between mb-2">
                    <span>Á∑èË®òÈå≤Êï∞:</span>
                    <span id="totalRecords">0</span>
                </div>
                <div class="flex justify-between">
                    <span>Á∂ôÁ∂öÊó•Êï∞:</span>
                    <span id="streakDays">0</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- „É°„Éã„É•„Éº„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
    <div class="menu-overlay" id="menuOverlay" onclick="toggleMenu()"></div>
    
    <!-- ‰øùÂ≠òÈÄöÁü• -->
    <div class="save-notification" id="saveNotification">
        <i class="fas fa-check-circle mr-2"></i>
        Ë®òÈå≤„Çí‰øùÂ≠ò„Åó„Åæ„Åó„ÅüÔºÅ
    </div>
    
    <div class="floating-hearts">
        üíï ‚ú® üå∏
    </div>
    
    <div class="max-w-4xl mx-auto" style="margin-left: auto; margin-right: auto;">
        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <div id="mainContent">
            <!-- ‰ªäÊó•„ÅÆË®òÈå≤ÂÖ•Âäõ„Éï„Ç©„Éº„É† -->
            <div id="entryForm">
                <!-- „Éò„ÉÉ„ÉÄ„Éº -->
                <div class="text-center mb-8">
                    <h1 class="text-4xl font-bold mb-2 page-title">
                        <i class="fas fa-star"></i> ÊØéÊó•„ÅÆÊåØ„ÇäËøî„Çä„Ç∑„Éº„Éà <i class="fas fa-star"></i>
                    </h1>
                    <p class="text-gray-600 text-lg">‰ªäÊó•„ÇÇ‰∏ÄÊó•„ÅäÁñ≤„Çå„Åï„Åæ„Åß„Åó„ÅüÔºÅ üíñ</p>
                </div>

                <!-- Êó•‰ªò„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div class="cute-card rounded-2xl p-6 mb-6">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <i class="fas fa-calendar-heart text-3xl text-pink-500"></i>
                            <div>
                                <label class="text-lg font-semibold text-gray-700">Ë®òÈå≤„Åô„ÇãÊó•‰ªò</label>
                                <input type="date" class="input-field ml-4 text-lg" id="recordDate" onchange="loadEntry()">
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl mb-2">üåü</div>
                            <div class="text-sm text-gray-500">Day <span class="font-bold text-purple-600" id="dayCounter">1</span></div>
                        </div>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Ê∞óÂàÜ„Çª„ÇØ„Ç∑„Éß„É≥ -->
                    <div class="cute-card rounded-2xl p-6">
                        <div class="section-header">
                            <h3 class="text-xl font-bold flex items-center gap-3">
                                <i class="fas fa-smile text-pink-500"></i>
                                ‰ªäÊó•„ÅÆÊ∞óÂàÜ„ÅØ„Å©„ÅÜ„Åß„Åó„Åü„ÅãÔºü
                            </h3>
                        </div>
                        <div class="grid grid-cols-5 gap-4 justify-items-center">
                            <div class="mood-button bg-red-100 hover:bg-red-200" data-mood="1" title="„Å®„Å¶„ÇÇÊÇ™„ÅÑ">üò¢</div>
                            <div class="mood-button bg-orange-100 hover:bg-orange-200" data-mood="2" title="ÊÇ™„ÅÑ">üòî</div>
                            <div class="mood-button bg-yellow-100 hover:bg-yellow-200" data-mood="3" title="ÊôÆÈÄö">üòê</div>
                            <div class="mood-button bg-green-100 hover:bg-green-200" data-mood="4" title="ËâØ„ÅÑ">üòä</div>
                            <div class="mood-button bg-blue-100 hover:bg-blue-200" data-mood="5" title="„Å®„Å¶„ÇÇËâØ„ÅÑ">üòÑ</div>
                        </div>
                        <div class="mt-6">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Ê∞óÂàÜ„Å´„Å§„ÅÑ„Å¶Ë©≥„Åó„ÅèÊïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ üí≠</label>
                            <textarea class="input-field w-full h-20 resize-none" id="moodNote" placeholder="‰ªäÊó•„ÅÆÊ∞óÂàÜ„Å´„Å§„ÅÑ„Å¶Ëá™Áî±„Å´Êõ∏„ÅÑ„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ..."></textarea>
                        </div>
                    </div>

                    <!-- „Çπ„Éà„É¨„Çπ„É¨„Éô„É´ -->
                    <div class="cute-card rounded-2xl p-6">
                        <div class="section-header">
                            <h3 class="text-xl font-bold flex items-center gap-3">
                                <i class="fas fa-heart-pulse text-purple-500"></i>
                                „Çπ„Éà„É¨„Çπ„É¨„Éô„É´
                            </h3>
                        </div>
                        <div class="mb-4">
                            <div class="flex justify-between text-sm text-gray-600 mb-2">
                                <span>üòå „É™„É©„ÉÉ„ÇØ„Çπ</span>
                                <span>üòì „Çπ„Éà„É¨„Çπ</span>
                            </div>
                            <div class="stress-level" id="stressLevel">
                                <div class="stress-indicator" id="stressIndicator" style="left: 30%;"></div>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">„Çπ„Éà„É¨„Çπ„ÅÆÂéüÂõ†„ÅØ‰Ωï„Åß„Åô„ÅãÔºü ü§î</label>
                            <textarea class="input-field w-full h-20 resize-none" id="stressNote" placeholder="„Çπ„Éà„É¨„Çπ„ÅÆÂéüÂõ†„ÇÑÂØæÂá¶ÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶Êõ∏„ÅÑ„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
                <div class="grid md:grid-cols-2 gap-6 mt-6">
                    <!-- ‰ªäÊó•„ÅÆÈÅîÊàê -->
                    <div class="cute-card rounded-2xl p-6">
                        <div class="section-header">
                            <h3 class="text-xl font-bold flex items-center gap-3">
                                <i class="fas fa-trophy text-yellow-500"></i>
                                ‰ªäÊó•„ÇÑ„Å£„Åü„Åì„Å®„ÉªÈÅîÊàê„Åó„Åü„Åì„Å®
                            </h3>
                        </div>
                        <div class="space-y-3">
                            <input type="text" class="input-field w-full" id="achievement1" placeholder="‚ú® ÈÅîÊàê„Åó„Åü„Åì„Å®„ÇíÊõ∏„ÅÑ„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ">
                            <input type="text" class="input-field w-full" id="achievement2" placeholder="‚ú® „Å©„Çì„Å™Â∞è„Åï„Å™„Åì„Å®„Åß„ÇÇOKÔºÅ">
                            <input type="text" class="input-field w-full" id="achievement3" placeholder="‚ú® Ëá™ÂàÜ„ÇíË§í„ÇÅ„Å¶„ÅÇ„Åí„Åæ„Åó„Çá„ÅÜ">
                        </div>
                    </div>

                    <!-- „Çà„Åã„Å£„Åü„Åì„Å® -->
                    <div class="cute-card rounded-2xl p-6">
                        <div class="section-header">
                            <h3 class="text-xl font-bold flex items-center gap-3">
                                <i class="fas fa-thumbs-up text-green-500"></i>
                                ‰ªäÊó•„Çà„Åã„Å£„Åü„Åì„Å®
                            </h3>
                        </div>
                        <textarea class="input-field w-full h-32 resize-none" id="goodThings" placeholder="‰ªäÊó•„ÅÇ„Å£„ÅüÂ¨â„Åó„ÅÑ„Åì„Å®„ÇÑËâØ„Åã„Å£„Åü„Åì„Å®„ÇíÊõ∏„ÅÑ„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ... üåà"></textarea>
                    </div>

                    <!-- ÊîπÂñÑ„Åó„Åü„ÅÑ„Åì„Å® -->
                    <div class="cute-card rounded-2xl p-6">
                        <div class="section-header">
                            <h3 class="text-xl font-bold flex items-center gap-3">
                                <i class="fas fa-seedling text-blue-500"></i>
                                ÊòéÊó•ÊîπÂñÑ„Åó„Åü„ÅÑ„Åì„Å®
                            </h3>
                        </div>
                        <textarea class="input-field w-full h-32 resize-none" id="improvements" placeholder="ÊòéÊó•„ÅØ„ÇÇ„Å£„Å®ËâØ„Åè„Åô„Çã„Åü„ÇÅ„Å´„ÄÅ„Å©„Çì„Å™„Åì„Å®„ÇíÊÑèË≠ò„Åó„Åü„ÅÑ„Åß„Åô„ÅãÔºü üå±"></textarea>
                    </div>

                    <!-- ÊòéÊó•„ÅÆÁõÆÊ®ô -->
                    <div class="cute-card rounded-2xl p-6">
                        <div class="section-header">
                            <h3 class="text-xl font-bold flex items-center gap-3">
                                <i class="fas fa-bullseye text-red-500"></i>
                                ÊòéÊó•„ÅÆÁõÆÊ®ô
                            </h3>
                        </div>
                        <div class="space-y-3">
                            <input type="text" class="input-field w-full" id="goal1" placeholder="üéØ ÊòéÊó•„ÅÆÁõÆÊ®ô 1">
                            <input type="text" class="input-field w-full" id="goal2" placeholder="üéØ ÊòéÊó•„ÅÆÁõÆÊ®ô 2">
                            <input type="text" class="input-field w-full" id="goal3" placeholder="üéØ ÊòéÊó•„ÅÆÁõÆÊ®ô 3">
                        </div>
                    </div>
                </div>

                <!-- Â≠¶„Å≥„Å®ÊÑüË¨ù -->
                <div class="grid md:grid-cols-2 gap-6 mt-6">
                    <!-- ‰ªäÊó•„ÅÆÂ≠¶„Å≥ -->
                    <div class="cute-card rounded-2xl p-6">
                        <div class="section-header">
                            <h3 class="text-xl font-bold flex items-center gap-3">
                                <i class="fas fa-lightbulb text-yellow-500"></i>
                                ‰ªäÊó•„ÅÆÂ≠¶„Å≥„ÉªÊ∞ó„Å•„Åç
                            </h3>
                        </div>
                        <textarea class="input-field w-full h-32 resize-none" id="learnings" placeholder="‰ªäÊó•Êñ∞„Åó„ÅèÂ≠¶„Çì„Å†„Åì„Å®„ÇÑÊ∞ó„Å•„ÅÑ„Åü„Åì„Å®„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü üí°"></textarea>
                    </div>

                    <!-- ÊÑüË¨ù„Åó„Å¶„ÅÑ„Çã„Åì„Å® -->
                    <div class="cute-card rounded-2xl p-6">
                        <div class="section-header">
                            <h3 class="text-xl font-bold flex items-center gap-3">
                                <i class="fas fa-heart text-red-500"></i>
                                ÊÑüË¨ù„Åó„Å¶„ÅÑ„Çã„Åì„Å®
                            </h3>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <span class="gratitude-heart">üíñ</span>
                                <input type="text" class="input-field flex-1" id="gratitude1" placeholder="ÊÑüË¨ù„Åó„Å¶„ÅÑ„Çã„Åì„Å®„ÇíÊõ∏„ÅÑ„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ">
                            </div>
                            <div class="flex items-center">
                                <span class="gratitude-heart">üíï</span>
                                <input type="text" class="input-field flex-1" id="gratitude2" placeholder="„Å©„Çì„Å™Â∞è„Åï„Å™„Åì„Å®„Åß„ÇÇÂ§ß‰∏àÂ§´„Åß„Åô">
                            </div>
                            <div class="flex items-center">
                                <span class="gratitude-heart">üíù</span>
                                <input type="text" class="input-field flex-1" id="gratitude3" placeholder="ÊÑüË¨ù„ÅÆÊ∞óÊåÅ„Å°„ÇíÂ§ßÂàá„Å´">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ‰øùÂ≠ò„Éú„Çø„É≥ -->
                <div class="text-center mt-8">
                    <button onclick="saveEntry()" class="bg-gradient-to-r from-pink-400 to-purple-500 text-white font-bold py-4 px-8 rounded-full text-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                        <i class="fas fa-save mr-2"></i>
                        ‰ªäÊó•„ÅÆË®òÈå≤„Çí‰øùÂ≠ò„Åô„Çã üíæ
                    </button>
                </div>

                <!-- „Éï„ÉÉ„Çø„Éº -->
                <div class="cute-card rounded-2xl p-6 mt-6 text-center">
                    <div class="text-2xl mb-4">üåü ‰ªäÊó•„ÇÇ‰∏ÄÊó•„ÅäÁñ≤„Çå„Åï„Åæ„Åß„Åó„ÅüÔºÅ üåü</div>
                    <div class="text-gray-600">
                        ÊòéÊó•„ÇÇ„ÅÇ„Å™„Åü„Çâ„Åó„Åè„ÄÅÁ¥†Êïµ„Å™‰∏ÄÊó•„ÇíÈÅé„Åî„Åó„Å¶„Åè„Å†„Åï„ÅÑ„Å≠ üíï
                    </div>
                    <div class="mt-4 text-3xl">
                        ‚ú® üå∏ üíñ ü¶ã üåà ‚ú®
                    </div>
                </div>
            </div>

            <!-- Ë®òÈå≤‰∏ÄË¶ßÁîªÈù¢ -->
            <div id="recordsList" style="display: none;">
                <div class="text-center mb-8">
                    <h1 class="text-4xl font-bold mb-2 page-title">
                        <i class="fas fa-book"></i> ÈÅéÂéª„ÅÆË®òÈå≤ <i class="fas fa-book"></i>
                    </h1>
                    <p class="text-gray-600 text-lg">„ÅÇ„Å™„Åü„ÅÆÊàêÈï∑„ÅÆËªåË∑° üìö</p>
                </div>
                
                <div id="recordsContainer">
                    <!-- „Åì„Åì„Å´ÈÅéÂéª„ÅÆË®òÈå≤„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô -->
                </div>
            </div>

            <!-- Áµ±Ë®àÁîªÈù¢ -->
            <div id="statsView" style="display: none;">
                <div class="text-center mb-8">
                    <h1 class="text-4xl font-bold mb-2 page-title">
                        <i class="fas fa-chart-line"></i> Áµ±Ë®à„ÉªÂàÜÊûê <i class="fas fa-chart-line"></i>
                    </h1>
                    <p class="text-gray-600 text-lg">„ÅÇ„Å™„Åü„ÅÆË®òÈå≤„ÇíÂàÜÊûê üìä</p>
                </div>
                
                <div class="grid md:grid-cols-3 gap-6" id="statsContainer">
                    <!-- „Åì„Åì„Å´Áµ±Ë®àÊÉÖÂ†±„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞
        let currentStressLevel = 30;
        let selectedMood = null;

        // ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('recordDate').value = new Date().toISOString().split('T')[0];
            loadEntry();
            updateMenuStats();
            initializeEventListeners();
        });

        // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº„ÅÆÂàùÊúüÂåñ
        function initializeEventListeners() {
            // Ê∞óÂàÜ„Éú„Çø„É≥„ÅÆÈÅ∏ÊäûÊ©üËÉΩ
            document.querySelectorAll('.mood-button').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.mood-button').forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedMood = this.dataset.mood;
                });
            });

            // „Çπ„Éà„É¨„Çπ„É¨„Éô„É´„ÅÆË™øÊï¥Ê©üËÉΩ
            const stressLevel = document.getElementById('stressLevel');
            const stressIndicator = document.getElementById('stressIndicator');
            
            stressLevel.addEventListener('click', function(e) {
                const rect = this.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const percentage = (x / rect.width) * 100;
                currentStressLevel = Math.max(0, Math.min(100, percentage));
                stressIndicator.style.left = currentStressLevel + '%';
            });

            // Ëá™Âãï‰øùÂ≠òÊ©üËÉΩ
            const inputs = document.querySelectorAll('.input-field');
            inputs.forEach(input => {
                input.addEventListener('blur', autoSave);
            });
        }

        // „É°„Éã„É•„Éº„ÅÆÈñãÈñâ
        function toggleMenu() {
            const sideMenu = document.getElementById('sideMenu');
            const menuOverlay = document.getElementById('menuOverlay');
            
            if (sideMenu.classList.contains('open')) {
                sideMenu.classList.remove('open');
                menuOverlay.classList.remove('active');
            } else {
                sideMenu.classList.add('open');
                menuOverlay.classList.add('active');
            }
        }

        // ÁèæÂú®„ÅÆË®òÈå≤Ë°®Á§∫
        function showCurrentEntry() {
            hideAllViews();
            document.getElementById('entryForm').style.display = 'block';
            toggleMenu();
        }

        // ÈÅéÂéª„ÅÆË®òÈå≤Ë°®Á§∫
        function showAllRecords() {
            hideAllViews();
            document.getElementById('recordsList').style.display = 'block';
            loadAllRecords();
            toggleMenu();
        }

        // Áµ±Ë®àË°®Á§∫
        function showStats() {
            hideAllViews();
            document.getElementById('statsView').style.display = 'block';
            generateStats();
            toggleMenu();
        }

        // ÂÖ®„Éì„É•„Éº„ÇíÈùûË°®Á§∫
        function hideAllViews() {
            document.getElementById('entryForm').style.display = 'none';
            document.getElementById('recordsList').style.display = 'none';
            document.getElementById('statsView').style.display = 'none';
        }

        // Ë®òÈå≤„ÅÆ‰øùÂ≠ò
        function saveEntry() {
            const date = document.getElementById('recordDate').value;
            const entry = {
                date: date,
                mood: selectedMood,
                moodNote: document.getElementById('moodNote').value,
                stressLevel: currentStressLevel,
                stressNote: document.getElementById('stressNote').value,
                achievements: [
                    document.getElementById('achievement1').value,
                    document.getElementById('achievement2').value,
                    document.getElementById('achievement3').value
                ].filter(a => a.trim()),
                goodThings: document.getElementById('goodThings').value,
                improvements: document.getElementById('improvements').value,
                goals: [
                    document.getElementById('goal1').value,
                    document.getElementById('goal2').value,
                    document.getElementById('goal3').value
                ].filter(g => g.trim()),
                learnings: document.getElementById('learnings').value,
                gratitude: [
                    document.getElementById('gratitude1').value,
                    document.getElementById('gratitude2').value,
                    document.getElementById('gratitude3').value
                ].filter(g => g.trim()),
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem(`journal-${date}`, JSON.stringify(entry));
            showSaveNotification();
            updateMenuStats();
        }

        // Ëá™Âãï‰øùÂ≠ò
        function autoSave() {
            if (document.getElementById('recordDate').value) {
                saveEntry();
            }
        }

        // Ë®òÈå≤„ÅÆË™≠„ÅøËæº„Åø
        function loadEntry() {
            const date = document.getElementById('recordDate').value;
            const savedEntry = localStorage.getItem(`journal-${date}`);
            
            if (savedEntry) {
                const entry = JSON.parse(savedEntry);
                
                // Ê∞óÂàÜ„ÅÆÂæ©ÂÖÉ
                if (entry.mood) {
                    selectedMood = entry.mood;
                    document.querySelectorAll('.mood-button').forEach(b => b.classList.remove('selected'));
                    document.querySelector(`[data-mood="${entry.mood}"]`).classList.add('selected');
                }
                
                // „Çπ„Éà„É¨„Çπ„É¨„Éô„É´„ÅÆÂæ©ÂÖÉ
                if (entry.stressLevel !== undefined) {
                    currentStressLevel = entry.stressLevel;
                    document.getElementById('stressIndicator').style.left = currentStressLevel + '%';
                }
                
                // „ÉÜ„Ç≠„Çπ„Éà„Éï„Ç£„Éº„É´„Éâ„ÅÆÂæ©ÂÖÉ
                document.getElementById('moodNote').value = entry.moodNote || '';
                document.getElementById('stressNote').value = entry.stressNote || '';
                document.getElementById('goodThings').value = entry.goodThings || '';
                document.getElementById('improvements').value = entry.improvements || '';
                document.getElementById('learnings').value = entry.learnings || '';
                
                // ÈÖçÂàó„ÅÆÂæ©ÂÖÉ
                if (entry.achievements) {
                    document.getElementById('achievement1').value = entry.achievements[0] || '';
                    document.getElementById('achievement2').value = entry.achievements[1] || '';
                    document.getElementById('achievement3').value = entry.achievements[2] || '';
                }
                
                if (entry.goals) {
                    document.getElementById('goal1').value = entry.goals[0] || '';
                    document.getElementById('goal2').value = entry.goals[1] || '';
                    document.getElementById('goal3').value = entry.goals[2] || '';
                }
                
                if (entry.gratitude) {
                    document.getElementById('gratitude1').value = entry.gratitude[0] || '';
                    document.getElementById('gratitude2').value = entry.gratitude[1] || '';
                    document.getElementById('gratitude3').value = entry.gratitude[2] || '';
                }
            } else {
                // Êñ∞„Åó„ÅÑË®òÈå≤„ÅÆÂ†¥Âêà„ÅØ„Éï„Ç£„Éº„É´„Éâ„Çí„ÇØ„É™„Ç¢
                clearForm();
            }
            
            updateDayCounter();
        }

        // „Éï„Ç©„Éº„É†„Çí„ÇØ„É™„Ç¢
        function clearForm() {
            selectedMood = null;
            currentStressLevel = 30;
            
            document.querySelectorAll('.mood-button').forEach(b => b.classList.remove('selected'));
            document.getElementById('stressIndicator').style.left = '30%';
            document.querySelectorAll('.input-field').forEach(field => field.value = '');
        }

        // ÈÅéÂéª„ÅÆË®òÈå≤‰∏ÄË¶ß„ÇíË™≠„ÅøËæº„Åø
        function loadAllRecords() {
            const records = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith('journal-')) {
                    const entry = JSON.parse(localStorage.getItem(key));
                    records.push(entry);
                }
            }
            
            records.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            const container = document.getElementById('recordsContainer');
            container.innerHTML = '';
            
            if (records.length === 0) {
                container.innerHTML = `
                    <div class="cute-card rounded-2xl p-8 text-center">
                        <div class="text-6xl mb-4">üìù</div>
                        <h3 class="text-xl font-bold text-gray-600 mb-2">„Åæ„Å†Ë®òÈå≤„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</h3>
                        <p class="text-gray-500">ÊúÄÂàù„ÅÆË®òÈå≤„ÇíÊõ∏„ÅÑ„Å¶„Åø„Åæ„Åó„Çá„ÅÜÔºÅ</p>
                    </div>
                `;
                return;
            }
            
            records.forEach(entry => {
                const recordCard = createRecordCard(entry);
                container.appendChild(recordCard);
            });
        }

        // Ë®òÈå≤„Ç´„Éº„Éâ„ÅÆ‰ΩúÊàê
        function createRecordCard(entry) {
            const div = document.createElement('div');
            div.className = 'record-card';
            
            const moodEmojis = ['', 'üò¢', 'üòî', 'üòê', 'üòä', 'üòÑ'];
            const moodTexts = ['', '„Å®„Å¶„ÇÇÊÇ™„ÅÑ', 'ÊÇ™„ÅÑ', 'ÊôÆÈÄö', 'ËâØ„ÅÑ', '„Å®„Å¶„ÇÇËâØ„ÅÑ'];
            
            div.innerHTML = `
                <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center gap-3">
                        <span class="text-2xl">${moodEmojis[entry.mood] || 'üòê'}</span>
                        <div>
                            <h3 class="font-bold text-lg">${entry.date}</h3>
                            <p class="text-sm text-gray-600">Ê∞óÂàÜ: ${moodTexts[entry.mood] || 'Êú™Ë®òÈå≤'}</p>
                        </div>
                    </div>
                    <button onclick="loadSpecificEntry('${entry.date}')" class="bg-purple-500 text-white px-4 py-2 rounded-full text-sm hover:bg-purple-600 transition-colors">
                        <i class="fas fa-edit mr-1"></i>Á∑®ÈõÜ
                    </button>
                </div>
                
                ${entry.achievements && entry.achievements.length > 0 ? `
                <div class="mb-2">
                    <span class="text-sm font-semibold text-purple-600">ÈÅîÊàê„Åó„Åü„Åì„Å®:</span>
                    <p class="text-sm text-gray-700">${entry.achievements.join(', ')}</p>
                </div>
                ` : ''}
                
                ${entry.goodThings ? `
                <div class="mb-2">
                    <span class="text-sm font-semibold text-green-600">„Çà„Åã„Å£„Åü„Åì„Å®:</span>
                    <p class="text-sm text-gray-700">${entry.goodThings}</p>
                </div>
                ` : ''}
                
                ${entry.gratitude && entry.gratitude.length > 0 ? `
                <div>
                    <span class="text-sm font-semibold text-red-600">ÊÑüË¨ù:</span>
                    <p class="text-sm text-gray-700">${entry.gratitude.join(', ')}</p>
                </div>
                ` : ''}
            `;
            
            return div;
        }

        // ÁâπÂÆö„ÅÆË®òÈå≤„ÇíË™≠„ÅøËæº„Åø
        function loadSpecificEntry(date) {
            document.getElementById('recordDate').value = date;
            showCurrentEntry();
            loadEntry();
        }

        // Áµ±Ë®à„ÅÆÁîüÊàê
        function generateStats() {
            const records = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith('journal-')) {
                    const entry = JSON.parse(localStorage.getItem(key));
                    records.push(entry);
                }
            }
            
            const container = document.getElementById('statsContainer');
            container.innerHTML = '';
            
            if (records.length === 0) {
                container.innerHTML = `
                    <div class="cute-card rounded-2xl p-8 text-center col-span-3">
                        <div class="text-6xl mb-4">üìä</div>
                        <h3 class="text-xl font-bold text-gray-600 mb-2">Áµ±Ë®à„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</h3>
                        <p class="text-gray-500">Ë®òÈå≤„ÇíÁ∂ö„Åë„Å¶Áµ±Ë®à„ÇíË¶ã„Å¶„Åø„Åæ„Åó„Çá„ÅÜÔºÅ</p>
                    </div>
                `;
                return;
            }
            
            // Âü∫Êú¨Áµ±Ë®à
            const totalRecords = records.length;
            const avgMood = records.filter(r => r.mood).reduce((sum, r) => sum + parseInt(r.mood), 0) / records.filter(r => r.mood).length || 0;
            const avgStress = records.filter(r => r.stressLevel !== undefined).reduce((sum, r) => sum + r.stressLevel, 0) / records.filter(r => r.stressLevel !== undefined).length || 0;
            
            // Áµ±Ë®à„Ç´„Éº„Éâ„ÅÆ‰ΩúÊàê
            container.innerHTML = `
                <div class="stats-card">
                    <div class="text-3xl mb-2">üìù</div>
                    <div class="text-2xl font-bold text-purple-600">${totalRecords}</div>
                    <div class="text-sm text-gray-600">Á∑èË®òÈå≤Êï∞</div>
                </div>
                
                <div class="stats-card">
                    <div class="text-3xl mb-2">üòä</div>
                    <div class="text-2xl font-bold text-green-600">${avgMood.toFixed(1)}</div>
                    <div class="text-sm text-gray-600">Âπ≥ÂùáÊ∞óÂàÜ„É¨„Éô„É´</div>
                </div>
                
                <div class="stats-card">
                    <div class="text-3xl mb-2">üíô</div>
                    <div class="text-2xl font-bold text-blue-600">${(100 - avgStress).toFixed(0)}%</div>
                    <div class="text-sm text-gray-600">Âπ≥Âùá„É™„É©„ÉÉ„ÇØ„ÇπÂ∫¶</div>
                </div>
                
                <div class="stats-card col-span-3">
                    <h3 class="text-lg font-bold mb-4">ÊúÄËøë„ÅÆÊ∞óÂàÜ„ÅÆÂ§âÂåñ üìà</h3>
                    <div class="flex items-end justify-between h-20 bg-white rounded-lg p-4">
                        ${records.slice(-7).map(record => {
                            const height = (record.mood || 3) * 12;
                            return `<div class="bg-gradient-to-t from-purple-400 to-pink-400 rounded-t w-8" style="height: ${height}px"></div>`;
                        }).join('')}
                    </div>
                    <div class="text-xs text-gray-500 mt-2 text-center">ÊúÄËøë7Êó•Èñì„ÅÆÊ∞óÂàÜÊé®Áßª</div>
                </div>
            `;
        }

        // „É°„Éã„É•„Éº„ÅÆÁµ±Ë®àÊõ¥Êñ∞
        function updateMenuStats() {
            const records = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith('journal-')) {
                    records.push(JSON.parse(localStorage.getItem(key)));
                }
            }
            
            document.getElementById('totalRecords').textContent = records.length;
            
            // Á∂ôÁ∂öÊó•Êï∞„ÅÆË®àÁÆóÔºàÁ∞°ÊòìÁâàÔºâ
            const dates = records.map(r => r.date).sort();
            let streak = 0;
            const today = new Date().toISOString().split('T')[0];
            let currentDate = new Date(today);
            
            while (streak < 100) { // ÁÑ°Èôê„É´„Éº„ÉóÈò≤Ê≠¢
                const dateStr = currentDate.toISOString().split('T')[0];
                if (dates.includes(dateStr)) {
                    streak++;
                    currentDate.setDate(currentDate.getDate() - 1);
                } else {
                    break;
                }
            }
            
            document.getElementById('streakDays').textContent = streak;
        }

        // Êó•Êï∞„Ç´„Ç¶„É≥„Çø„Éº„ÅÆÊõ¥Êñ∞
        function updateDayCounter() {
            const records = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith('journal-')) {
                    records.push(JSON.parse(localStorage.getItem(key)));
                }
            }
            
            const currentDate = document.getElementById('recordDate').value;
            const sortedDates = records.map(r => r.date).sort();
            const dayNumber = sortedDates.indexOf(currentDate) + 1;
            
            document.getElementById('dayCounter').textContent = dayNumber > 0 ? dayNumber : records.length + 1;
        }

        // ‰øùÂ≠òÈÄöÁü•„ÅÆË°®Á§∫
        function showSaveNotification() {
            const notification = document.getElementById('saveNotification');
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // „Éá„Éº„Çø„ÅÆ„Ç®„ÇØ„Çπ„Éù„Éº„Éà
        function exportData() {
            const records = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith('journal-')) {
                    records.push(JSON.parse(localStorage.getItem(key)));
                }
            }
            
            if (records.length === 0) {
                alert('„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Åô„ÇãË®òÈå≤„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ');
                return;
            }
            
            const dataStr = JSON.stringify(records, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `diary_backup_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            toggleMenu();
            alert('Ë®òÈå≤„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åó„Åæ„Åó„ÅüÔºÅ üíæ');
        }
    </script>
</body>
</html>
